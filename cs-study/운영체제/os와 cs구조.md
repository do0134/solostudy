# 운영체제와 컴퓨터 시스템 구조
<hr/>

## 운영체제
> **사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스**<br>
> 하드웨어, 소프트웨어를 관리하고 제어한다.<br>
> 컴퓨터 자원을 효율적으로 관리하여 응용프로그램이 원할하게 동작할 수 있도록함.
- 운영체제는 어떤 인터페이스를 두냐에 따라 CUI, GUI로 나뉨
  - GUI : 그림(그래픽)으로 나타나지면 GUI
  - CUI : 문자열(Character)로 나타나지면 CUI

### 운영체제의 역할
> 운영체제의 커널이 담당함
- CPU 스케줄링과 프로세스 상태관리
- 메모리관리
- 디스크 파일 관리
- I/O 디바이스 관리

### 운영체제 구조
1. 유저 프로그램
2. 인터페이스(CUI / GUI)
3. 시스템콜
4. 커널
5. 드라이버
6. 하드웨어<br> 
2~5가 운영체제 해당함

<hr/>

### 컴퓨터 요소
1. CPU
2. DMA 컨트롤러
3. 메모리
4. 타이머
5. 디바이스 컨트롤러
6. 로컬 버퍼
7. 등등

### CPU
> **CPU = 산술논리연산장치+제어장치+레지스터**<br>
**인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼**

* 조금 더 정확히는 메모리에서 레지스터로 올라간 명령어를 실행하는 일꾼

**산술논리연산장치**
- ALU라고 함
- 산술연산과 논리연산을 하는 회로장치<br>

**제어장치**
- 프로세스 조작을 지시
- 명령어들을 읽고 해석하며 데이터 처리를 위한 순서 결정

**레지스터**
- CPU 안의 매우 빠른 임시기억장치

그 밖에 L1, L2 캐시, 버스, 클럭 등이 존재함

**연산 처리**
1. 메모리에 계산할 값을 로드(레지스터로 로드)
2. 레지스터에 있는 값을 계산(제어장치 to 산술논리연산장치 이거 계산해!)
   - 단! 이 때 제어장치가 명령어를 해석하여 적절한 동작을 수행할 수 있는 장치에 주는 것이기 때문에 꼭 ALU가 아닐 수도 있다!
   - 이 때 어떤 연산을 수행해야 하는지, 어떤 레지스터를 사용해야 하는지 등을 결정하고 관련된 제어 신호를 전상함
3. 다시 레지스터에서 메모리로 계산한 값을 저장(산술연산장치 to 레지스터, 메모리 계산결과 여기 있습니다!)


### 참고 (CPU가 이렇게 운영되는 게 맞는지 챗GPT에 물어봤다.)
> Q. CPU는 메모리에 명령어를 레지스터나 직접 가져와서 제어 유닛에서 명령어를 해석한 다음, ALU 등 장치에서 연산하고 다시 레지스터에 결과값을 저장하는 형식으로 작동해?

맞습니다. CPU는 메모리에 저장된 명령어를 가져와서 레지스터나 직접적으로 처리하는 단계를 거치며 작동합니다. 이를 위해 명령어 사이클이라는 단계적인 과정을 따릅니다.

명령어 Fetch(가져오기): CPU는 프로그램 카운터(Program Counter)라고 불리는 레지스터에 저장된 다음 실행할 명령어의 주소를 읽어옵니다. 그 주소에 해당하는 명령어를 메모리에서 가져와서 명령어 레지스터(Instruction Register)에 저장합니다.

명령어 Decode(해석): 명령어 레지스터에 저장된 명령어를 제어 유닛(Control Unit)이 해석합니다. 명령어 해석 단계에서는 해당 명령어의 종류와 실행에 필요한 제어 신호를 결정합니다.

Operand Fetch(피연산자 가져오기): 일부 명령어는 피연산자(Operand)라고 불리는 추가적인 데이터를 필요로 합니다. 제어 유닛은 필요한 경우 메모리나 레지스터에서 피연산자를 가져옵니다.

Execute(실행): 제어 유닛은 ALU(산술 논리 유닛)에 앞선 단계에서 해석된 명령어와 피연산자에 대한 제어 신호를 보내어 연산을 수행합니다. ALU는 산술, 논리 연산 등을 처리하고 결과를 생성합니다.

결과 저장: ALU가 생성한 결과나 중간 결과는 레지스터에 저장됩니다. 레지스터는 CPU 내부의 빠른 데이터 저장 공간이므로, 실행 중에 데이터를 저장하고 임시로 유지하는 데 사용됩니다.

위의 단계는 명령어 실행 사이클을 대표적으로 나타낸 것이며, 다양한 CPU 아키텍처에서는 추가적인 단계나 과정이 존재할 수 있습니다. 또한, 명령어의 종류에 따라 다양한 동작과 처리 방식이 있을 수 있습니다. 그러나 기본적으로 CPU는 명령어를 가져와 해석한 후, 필요한 연산을 ALU 등의 장치에서 수행하고 결과를 레지스터에 저장하는 형식으로 작동합니다.